{% extends 'base.html.twig' %}

{% block title %}
	{{ parent()}}| Bibliophilie
{% endblock %}

{% block body %}
	<div class="container-fluid">
		<div class="row justify-content-center">
			<h1 class="text-center text-primary p-4">
				<a class="nav-link" href="{{path('bibliophilie')}}">Bibliophilie</a>
			</h1>
		</div>
		<br>
		<div class="row justify-content-center">
			<h3 class="text-center text-primary p-4">
				Livres d'artiste
			</h3>
		</div>

		<div class="row">
				{% set i = 0 %}
				<div class="col-sm-6">
					<div class="list-group list-group-flush">
						{% for biblio in biblios|slice(0, biblios|length/2) %}
							{% if biblio.type.id == 1 %}
							<a class="list-group-item list-group-item-action border-0">
								<h5 href="{{path('oeuvre',{'id':biblio.oeuvre.id})}}" class="card-title nav-link">{{biblio.oeuvre.titre|capitalize}}</h5>
								{% set adder = "" %}
								{% set cpt = 0 %}
								{% for aut in biblio.oeuvre.auteurs %}
									{{aut.prenom|capitalize}}
									{{aut.nom|upper}}
									{% if biblio.oeuvre.auteurs|length == 1 %}
										{% elseif biblio.oeuvre.auteurs|length == 2 %}
											{% set adder = " & " %}
										{% else %}
											{% set adder = ", " %}
									{% endif %}
									{% if cpt < biblio.oeuvre.auteurs|length - 1 %}
										{{adder}}
									{% endif %}
									{% set cpt = cpt + 1 %}
								{% endfor %}
								<small class="text-muted">{{biblio.oeuvre.noteStatut|capitalize}}</small>
								<p class="text text-right">
									{% if biblio.oeuvre.datePublication > date() %}
										Paraît le
									{% else %}
										Paru le
									{% endif %}

									{{biblio.oeuvre.datePublication|date('d-m-Y')}}</p>
							</a>
							{% set i = i + 1 %}
							{% endif %}
						{% endfor %}
					</div>
				</div>
				<div class="col-sm-6">
					<div class="list-group list-group-flush">
						{% for biblio in biblios|slice(biblios|length/2, biblios|length) %}
							{% if biblio.type.id == 1 %}
							<a href="{{path('oeuvre',{'id':biblio.oeuvre.id})}}" class="list-group-item list-group-item-action  border-0">
								<h5 class="card-title">{{biblio.oeuvre.titre|capitalize}}</h5>
								{% set adder = "" %}
								{% set cpt = 0 %}
								{% for aut in biblio.oeuvre.auteurs %}
									{{aut.prenom|capitalize}}
									{{aut.nom|upper}}
									{% if biblio.oeuvre.auteurs|length == 1 %}
										{% elseif biblio.oeuvre.auteurs|length == 2 %}
											{% set adder = " & " %}
										{% else %}
											{% set adder = ", " %}
									{% endif %}
									{% if cpt < biblio.oeuvre.auteurs|length - 1 %}
										{{adder}}
									{% endif %}
									{% set cpt = cpt + 1 %}
								{% endfor %}
								<small class="text-muted">{{biblio.oeuvre.noteStatut|capitalize}}</small>
								<p class="text text-right">
									{% if biblio.oeuvre.datePublication > date() %}
										Paraît le
									{% else %}
										Paru le
									{% endif %}

									{{biblio.oeuvre.datePublication|date('d-m-Y')}}</p>
							</a>
							{% if is_granted('IS_AUTHENTICATED_FULLY') %}
							<a href="{{path('bibliophilie',{'supp':biblio.id})}}">
								<span class="material-icons text-dark" title="Supprimer le tirage de la base de données">delete</span>
							</a>
							<a href="{{path('modifBiblio',{'id':biblio.id})}}">
								<span class="material-icons text-dark" title="Modifier le tirage dans la base de données">create</span>
							</a>
							{% endif %}
							{% set i = i + 1 %}
							{% endif %}
						{% endfor %}
					</div>
				</div>
			</div>

		<br>
		<div class="row justify-content-center">
			<h3 class="text-center text-primary p-4">
				Tirages de tête
			</h3>
		</div>

		<div class="row">
				{% set i = 0 %}
				<div class="col-sm-6">
					<div class="list-group list-group-flush">
						{% for biblio in biblios|slice(0, biblios|length/2) %}
							{% if biblio.type.id == 2 %}
							<a class="list-group-item list-group-item-action border-0">
								<h5 href="{{path('oeuvre',{'id':biblio.oeuvre.id})}}" class="card-title nav-link">{{biblio.oeuvre.titre|capitalize}}</h5>
								{% set adder = "" %}
								{% set cpt = 0 %}
								{% for aut in biblio.oeuvre.auteurs %}
									{{aut.prenom|capitalize}}
									{{aut.nom|upper}}
									{% if biblio.oeuvre.auteurs|length == 1 %}
										{% elseif biblio.oeuvre.auteurs|length == 2 %}
											{% set adder = " & " %}
										{% else %}
											{% set adder = ", " %}
									{% endif %}
									{% if cpt < biblio.oeuvre.auteurs|length - 1 %}
										{{adder}}
									{% endif %}
									{% set cpt = cpt + 1 %}
								{% endfor %}
								<small class="text-muted">{{biblio.oeuvre.noteStatut|capitalize}}</small>
								<p class="text text-right">
									{% if biblio.oeuvre.datePublication > date() %}
										Paraît le
									{% else %}
										Paru le
									{% endif %}

									{{biblio.oeuvre.datePublication|date('d-m-Y')}}</p>
							</a>
							{% set i = i + 1 %}
							{% endif %}
						{% endfor %}
					</div>
				</div>
				<div class="col-sm-6">
					<div class="list-group list-group-flush">
						{% for biblio in biblios|slice(biblios|length/2, biblios|length) %}
							{% if biblio.type.id == 2 %}
							<a href="{{path('oeuvre',{'id':biblio.oeuvre.id})}}" class="list-group-item list-group-item-action  border-0">
								<h5 class="card-title">{{biblio.oeuvre.titre|capitalize}}</h5>
								{% set adder = "" %}
								{% set cpt = 0 %}
								{% for aut in biblio.oeuvre.auteurs %}
									{{aut.prenom|capitalize}}
									{{aut.nom|upper}}
									{% if biblio.oeuvre.auteurs|length == 1 %}
										{% elseif biblio.oeuvre.auteurs|length == 2 %}
											{% set adder = " & " %}
										{% else %}
											{% set adder = ", " %}
									{% endif %}
									{% if cpt < biblio.oeuvre.auteurs|length - 1 %}
										{{adder}}
									{% endif %}
									{% set cpt = cpt + 1 %}
								{% endfor %}
								<small class="text-muted">{{biblio.oeuvre.noteStatut|capitalize}}</small>
								<p class="text text-right">
									{% if biblio.oeuvre.datePublication > date() %}
										Paraît le
									{% else %}
										Paru le
									{% endif %}

									{{biblio.oeuvre.datePublication|date('d-m-Y')}}</p>
							</a>
							{% if is_granted('IS_AUTHENTICATED_FULLY') %}
							<a href="{{path('bibliophilie',{'supp':biblio.id})}}">
								<span class="material-icons text-dark" title="Supprimer le tirage de la base de données">delete</span>
							</a>
							<a href="{{path('modifBiblio',{'id':biblio.id})}}">
								<span class="material-icons text-dark" title="Modifier le tirage dans la base de données">create</span>
							</a>
							{% endif %}
							{% set i = i + 1 %}
							{% endif %}
						{% endfor %}
					</div>
				</div>
			</div>	
	</div>
{% endblock %}