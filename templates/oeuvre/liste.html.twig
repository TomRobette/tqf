{% extends 'base.html.twig' %}

{% block title %}
	{{ parent()}}| Auteurs
{% endblock %}

{% block body %}
	<div class="container-fluid">
		<div class="row justify-content-center">
			<h1 class="text-center text-primary p-4">Liste des Oeuvres</h1>
		</div>
		<div class="row row-cols-1 row-cols-md-6 g-4">
			{% set i = 0 %}
			{% for oeuvre in oeuvre %}
				<div class="col mt-3">
					<a class="card-linker" href="{{path('oeuvre',{'id':oeuvre.id})}}">
						<div class="card">
							<img src="{{images[i]}}" class="card-img-top" alt="..."/>
							<div class="card-body">
								<p class="card-text">
									{% set adder = "" %}
									{% set cpt = 0 %}
									{% for aut in oeuvre.auteurs %}
										{{aut.prenom|capitalize}}
										{{aut.nom|upper}}
										{% if oeuvre.auteurs|length == 1 %}
										{% elseif oeuvre.auteurs|length == 2 %}
											{% set adder = " & " %}
										{% else %}
											{% set adder = ", " %}
										{% endif %}
										{% if cpt < oeuvre.auteurs|length - 1 %}
											{{adder}}
										{% endif %}
										{% set cpt = cpt + 1 %}
									{% endfor %}
								</p>
								<h5 class="card-title">{{oeuvre.titre|capitalize}}</h5>

								<p class="card-text">
									<small class="text-muted">{{oeuvre.noteStatut|capitalize}}</small>
								</p>
								{% if is_granted('IS_AUTHENTICATED_FULLY') %}
									<a href="{{path('listeOeuvres',{'supp':oeuvre.id})}}">
										<span class="material-icons text-dark" title="Supprimer l'oeuvre de la base de données">delete</span>
									</a>
									<a href="{{path('modifOeuvre',{'id':oeuvre.id})}}">
										<span class="material-icons text-dark" title="Modifier l'oeuvre dans la base de données">create</span>
									</a>
								{% endif %}	
							</div>
						</div>
					</a>

				</div>
				{% set i = i + 1 %}
			{% endfor %}
		</div>
	</div>
{% endblock %}
